# 基本知识
## 非对称加密
非对称加密使用一对不同的密钥，即公钥和私钥，来完成加密和解密的过程。公钥是可对外公开的秘钥，可以对外分享。私钥是私密的秘钥，必须保持保密。在加密过程中，消息发送方使用接收方公钥加密消息数据，接收方收到数据后，必须使用公钥对应的私钥才可以解密数据，从而保证了消息传递和秘钥的安全性。
<img wigth="400" src=./image/wallet_basic/2023-05-01-20-17-35@2x.png />
在加密货币交易过程中，发送者使用接收者发送交易，使用接受者的公钥（地址由公钥产生）作为接收目标，并使用自己的私钥对交易进行签名，同时，在交易中，发送者也将自己的公钥信息一同发送，接受者可以使用发送者的公钥对交易进行验签。
### RSA 和椭圆曲线
#### RSA 算法
RSA 是一种常见的非对称加密算法，被广泛用于银行等领域。欧拉定理是 RSA 算法的核心依据，其安全性基于**大质数分解难题**。
> 密钥生成：选择两个大素数p和q，计算n=pq，选择一个整数e，满足1＜e＜φ(n)且e与φ(n)互质，计算d=e^-1 mod φ(n)，其中φ(n)=(p-1)(q-1)，n和e组成公钥，n和d组成私钥。
>加密：将明文M转换成一个数字m，然后使用公钥(n,e)将m加密成密文C，即C=m^e mod n。
>解密：将密文C使用私钥(n,d)解密成明文m，即m=C^d mod n。
要想破解RSA算法，需要找到n的质因数p和q，然后才能计算出私钥d，因此RSA算法的安全性与n的长度直接相关。一般来说，为了保证足够的安全性，n的长度应该至少为2048位。
#### 椭圆曲线算法
ECC 算法是另一种非对称加密算法，Bitcoin 和 Ethereum 等大多数加密货币都使用此算法。
椭圆曲线是一条满足 $ 𝑦^2=𝑥^3+𝑎𝑥+𝑏 $ 等式的曲线，并且$ 4𝑎^3+27𝑏^2≠0 $（避免奇点）。Bitcoin、Ethereum 使用的椭圆曲线是$ 𝑦^2=𝑥^3+7 $，即 “secp256k1”。
![](./_image/2023-05-01/2023-05-01-21-35-55@2x.jpg)
椭圆曲线算法的数学解释比较复杂，不做赘述，重点需要了解的是椭圆曲线能被用于非对称加密的原因，椭圆曲线的安全性基于离散对数难题的困难程度。这种难题在椭圆曲线上比在其他常用的数学结构上更难求解，因此可以用来构造更加安全的密码系统。
## 公私钥与地址
公钥和私钥是非对称密码学中的概念。私钥就是一串随机生成的数字，用于对区块链交易进行签名。私钥代表着一个钱包的所有权，一旦私钥丢失或被盗，则意味着这个钱包不再可用。

公钥是由私钥通过算法生成的，大多数加密货币的公钥是私钥经过椭圆曲线算法得出的。一个私钥可以得出多个公钥。

虽然椭圆曲线的数学原理保障了实际上的安全性，使公钥不能反推私钥，但理论上是可以通过超大的计算反推的，为了保证绝对安全，中本聪引入了地址这一概念。地址即将公钥进行哈希运算的结果，由于哈希运算不可逆，引入地址又为区块链账户系统增加了一道安全保障。

### Bitcoin 公私钥
Bitcoin私钥是一个256位的随机数，通过SHA-256算法产生。Bitcoin 使用secp256k1标准所定义的一条特殊的椭圆曲线和一系列数学常数，用私钥通过此算法推导出公钥。将公钥进行多次哈希运算，最终得出比特币地址。
### Ethereum 公私钥
Ethereum 私钥使用 SHA-256算法产生。是一个 16进制32字节的字符串。公钥采用椭圆曲线数字签名算法ECDSA-secp256k1将私钥（32字节）映射成公钥（65字节）。将公钥进行哈希运算，计算出公钥的 Keccak-256 哈希值（32bytes），并取其最好 20 位，即为以太坊的地址。
## 助记词
钱包私钥一般是几十位 16 进制字符串，在备份或恢复过程中不方便抄录和录入，也容易出错，助记词的出现让钱包备份和恢复变得简单。助记词是明文私钥的另一种表现形式, 最早是由 BIP39 提案提出, 其目的是为了帮助用户记忆复杂的私钥 (64位的哈希值)。助记词一般由12、15、18、21个单词构成, 这些单词都取自一个固定词库, 其生成顺序也是按照一定算法而来, 所以用户没必要担心随便输入 12 个单词就会生成一个地址。
> 官方英文词库地址：https://github.com/bitcoin/bips/blob/master/bip-0039/english.txt
>官方中文词库地址：https://github.com/bitcoin/bips/blob/master/bip-0039/chinese_simplified.txt

### BIP39
BIP39 是编号为 39 的比特币改进提议，旨在通过一组容易被记住的单词（即助记词），来生成确定性钱包。
>BIP39 原文：https://github.com/bitcoin/bips/blob/master/bip-0039.mediawiki
## Keystore
Keystore 文件就是一种以加密的方式存储密钥的文件。助记词其实也是一种明文私钥，其并未在安全性方面做出任何提升。而 Keystore 是将私钥进行了一层密码加密，当使用 keystore 时，需要使用密码对其解密，才能解密出私钥恢复钱包。
